var w=Object.defineProperty,G=t=>w(t,"__esModule",{value:!0}),J=(t,r)=>{G(t);for(var e in r)w(t,e,{get:r[e],enumerable:!0})};J(exports,{Cue:()=>T,_creatElement:()=>st,_createText:()=>ot,_for:()=>at,_if:()=>ct,_string:()=>ft,_vHide:()=>pt,_vShow:()=>lt,_withDirectives:()=>ut,createApp:()=>ht});function E(t,r,e){if(r==="className"&&(r="class"),/on\w+/.test(r))r=r.toLowerCase(),t[r]=e||"";else if(r==="style"){if(!e||typeof e=="string")t.style.cssText=e||"";else if(e&&typeof e=="object")for(let n in e)t.style[n]=typeof e[n]=="number"?e[n]+"px":e[n]}else r in t&&(t[r]=e||""),e?t.setAttribute(r,e):t.removeAttribute(r)}function Q(t){return Object.prototype.toString.call(t).replace(/\[object\s|\]/g,"")}function m(t){return Q(t)==="String"}function v(t,r){for(var e=0,n=t.length;e<n;e++)r(t[e],e)}function D(t){if(!t)return[];for(var r=[],e=0,n=t.length;e<n;e++)r.push(t[e]);return r}function O(t,r){return r.appendChild(Y(t))}function Y(t){if(typeof t=="string")return document.createTextNode(t);if(Array.isArray(t)){let e=document.createDocumentFragment();return t.forEach(n=>{n.forEach(i=>O(i,e))}),e}let r=document.createElement(t.tag);return t.attrs&&Object.keys(t.attrs).forEach(e=>{let n=t.attrs[e];if(e.indexOf("on-")!==-1){r.addEventListener(e.slice(3),n,!1);return}E(r,e,n)}),t.children&&t.children.forEach(e=>O(e,r)),r}var P=O,j=0,k=1,K=2,W=3;function g(t,r){var e={index:0};F(t,e,r)}function F(t,r,e){for(var n=e[r.index],i=t.childNodes?t.childNodes.length:0,s=0;s<i;s++){var f=t.childNodes[s];r.index++,F(f,r,e)}n&&Z(t,n)}function Z(t,r){v(r,function(e){switch(e.type){case j:var n=typeof e.node=="string"?document.createTextNode(e.node):e.node.render();t.parentNode.replaceChild(n,t);break;case k:N(t,e.moves);break;case K:tt(t,e.props);break;case W:t.textContent?t.textContent=e.content:t.nodeValue=e.content;break;default:throw new Error("Unknown patch type "+e.type)}})}function N(t,r){var e=D(t.childNodes),n={};v(e,function(i){if(i.nodeType===1){var s=i.getAttribute("key");s&&(n[s]=i)}}),v(r,function(i){var s=i.index;if(i.type===0)e[s]===t.childNodes[s]&&t.removeChild(t.childNodes[s]),e.splice(s,1);else if(i.type===1){var f=n[i.item.key]?n[i.item.key].cloneNode(!0):typeof i.item=="object"?i.item.render():document.createTextNode(i.item);e.splice(s,0,f),t.insertBefore(f,t.childNodes[s]||null)}})}function tt(t,r){for(var e in r){var n=r[e];E(t,e,n)}}g.REPLACE=j;g.REORDER=k;g.PROPS=K;g.TEXT=W;var x=g;function et(t,r,e){for(var n=M(t,e),i=M(r,e),s=i.free,f=n.keyIndex,c=i.keyIndex,u=[],l=[],o=0,a,p,B=0;o<t.length;){if(a=t[o],p=_(a,e),p)if(!c.hasOwnProperty(p))l.push(null);else{var L=c[p];l.push(r[L])}else{var U=s[B++];l.push(U||null)}o++}var h=l.slice(0);for(o=0;o<h.length;)h[o]===null?(b(o),I(o)):o++;for(var d=o=0;o<r.length;){a=r[o],p=_(a,e);var C=h[d],V=_(C,e);if(C)if(p===V)d++;else if(!f.hasOwnProperty(p))A(o,a);else{var q=_(h[d+1],e);q===p?(b(o),I(d),d++):A(o,a)}else A(o,a);o++}for(var S=h.length-d;d++<h.length;)S--,b(S+o);function b(y){var R={index:y,type:0};u.push(R)}function A(y,R){var z={index:y,item:R,type:1};u.push(z)}function I(y){h.splice(y,1)}return{moves:u,children:l}}function M(t,r){for(var e={},n=[],i=0,s=t.length;i<s;i++){var f=t[i],c=_(f,r);c?e[c]=i:n.push(f)}return{keyIndex:e,free:n}}function _(t,r){return!t||!r?void 0:typeof r=="string"?t[r]:r(t)}var X=et;function rt(t,r){var e=0,n={};return H(t,r,e,n),n}function H(t,r,e,n){var i=[];if(!(r===null))if(m(t)&&m(r))r!==t&&i.push({type:x.TEXT,content:r});else if(t.tag===r.tag&&t.key===r.key){var s=it(t,r);s&&i.push({type:x.PROPS,props:s}),nt(t.children,r.children,e,n,i)}else i.push({type:x.REPLACE,node:r});i.length&&(n[e]=i)}function nt(t,r,e,n,i){var s=X(t,r,"key");if(r=s.children,s.moves.length){var f={type:x.REORDER,moves:s.moves};i.push(f)}var c=null,u=e;v(t,function(l,o){var a=r[o];u=c&&c.count?u+c.count+1:u+1,H(l,a,u,n),c=l})}function it(t,r){var e=0,n=t.attrs,i=r.attrs,s,f,c={};for(s in n){if(s.startsWith("on-"))continue;f=n[s],i[s]!==f&&(e++,c[s]=i[s])}for(s in i){if(s.startsWith("on-"))continue;f=i[s],n.hasOwnProperty(s)||(e++,c[s]=i[s])}return e===0?null:c}var $=rt;function st(t,r,e){return{tag:t,attrs:r,children:e}}function ot(t){return t}function ft(t){return t}function ct(t,r,e){return t?r():e()}function at(t,r){return t.map(function(e,n){return r(e,n)})}function ut(t,r){return r.map(([e,n])=>m(e)?void 0:e(t,n)),t}function lt(t,r){t.attrs.style=`display: ${r==="true"?"block":"none"};`}function pt(t,r){t.attrs.style=`display: ${r==="true"?"none":"block"};`}var T=class{constructor({script:r,css:e,tpl:n,render:i}){this.render=i,this._ctx=this.initContext(r),this.vNode=this.render(this._ctx),this._ctx.created&&this._ctx.created()}initContext(r){return r.setData=e=>{let n=this._ctx;this.data=Object.assign(n.data,e);let i=this.render(this);console.log("new node: ",i),console.log("old node: ",this.vNode);var s=$(this.vNode,i);console.log(s),x(this.root,s),this.vNode=i,this._ctx.updated&&this._ctx.updated()},r}mount(r){this.root=r,P(this.vNode,this.root),this._ctx.mounted&&this._ctx.mounted()}destroy(){this.root.innerHTML="",this._ctx.destroyed&&this._ctx.destroyed()}};function ht(t){return new T(t)}
