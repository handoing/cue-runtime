var w=Object.defineProperty,et=t=>w(t,"__esModule",{value:!0}),rt=(t,e)=>{et(t);for(var r in e)w(t,r,{get:e[r],enumerable:!0})};rt(exports,{Cue:()=>T,_creatElement:()=>B,_createText:()=>L,_if:()=>U,_string:()=>N,_vHide:()=>z,_vShow:()=>q,_withDirectives:()=>V,createApp:()=>pt});function E(t,e,r){if(e==="className"&&(e="class"),/on\w+/.test(e))e=e.toLowerCase(),t[e]=r||"";else if(e==="style"){if(!r||typeof r=="string")t.style.cssText=r||"";else if(r&&typeof r=="object")for(let n in r)t.style[n]=typeof r[n]=="number"?r[n]+"px":r[n]}else e in t&&(t[e]=r||""),r?t.setAttribute(e,r):t.removeAttribute(e)}function nt(t){return Object.prototype.toString.call(t).replace(/\[object\s|\]/g,"")}function g(t){return nt(t)==="String"}function x(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}function I(t){if(!t)return[];for(var e=[],r=0,n=t.length;r<n;r++)e.push(t[r]);return e}function D(t,e){return e.appendChild(it(t))}function it(t){if(typeof t=="string")return document.createTextNode(t);let e=document.createElement(t.tag);return t.attrs&&Object.keys(t.attrs).forEach(r=>{let n=t.attrs[r];if(r.indexOf("on-")!==-1){e.addEventListener(r.slice(3),n,!1);return}E(e,r,n)}),t.children&&t.children.forEach(r=>D(r,e)),e}var P=D,j=0,k=1,K=2,W=3;function m(t,e){var r={index:0};H(t,r,e)}function H(t,e,r){for(var n=r[e.index],i=t.childNodes?t.childNodes.length:0,s=0;s<i;s++){var f=t.childNodes[s];e.index++,H(f,e,r)}n&&st(t,n)}function st(t,e){x(e,function(r){switch(r.type){case j:var n=typeof r.node=="string"?document.createTextNode(r.node):r.node.render();t.parentNode.replaceChild(n,t);break;case k:ot(t,r.moves);break;case K:ft(t,r.props);break;case W:t.textContent?t.textContent=r.content:t.nodeValue=r.content;break;default:throw new Error("Unknown patch type "+r.type)}})}function ot(t,e){var r=I(t.childNodes),n={};x(r,function(i){if(i.nodeType===1){var s=i.getAttribute("key");s&&(n[s]=i)}}),x(e,function(i){var s=i.index;if(i.type===0)r[s]===t.childNodes[s]&&t.removeChild(t.childNodes[s]),r.splice(s,1);else if(i.type===1){var f=n[i.item.key]?n[i.item.key].cloneNode(!0):typeof i.item=="object"?i.item.render():document.createTextNode(i.item);r.splice(s,0,f),t.insertBefore(f,t.childNodes[s]||null)}})}function ft(t,e){for(var r in e){var n=e[r];E(t,r,n)}}m.REPLACE=j;m.REORDER=k;m.PROPS=K;m.TEXT=W;var v=m;function ct(t,e,r){for(var n=M(t,r),i=M(e,r),s=i.free,f=n.keyIndex,c=i.keyIndex,l=[],u=[],o=0,a,p,G=0;o<t.length;){if(a=t[o],p=_(a,r),p)if(!c.hasOwnProperty(p))u.push(null);else{var J=c[p];u.push(e[J])}else{var Q=s[G++];u.push(Q||null)}o++}var h=u.slice(0);for(o=0;o<h.length;)h[o]===null?(b(o),S(o)):o++;for(var d=o=0;o<e.length;){a=e[o],p=_(a,r);var O=h[d],Y=_(O,r);if(O)if(p===Y)d++;else if(!f.hasOwnProperty(p))A(o,a);else{var Z=_(h[d+1],r);Z===p?(b(o),S(d),d++):A(o,a)}else A(o,a);o++}for(var C=h.length-d;d++<h.length;)C--,b(C+o);function b(y){var R={index:y,type:0};l.push(R)}function A(y,R){var tt={index:y,item:R,type:1};l.push(tt)}function S(y){h.splice(y,1)}return{moves:l,children:u}}function M(t,e){for(var r={},n=[],i=0,s=t.length;i<s;i++){var f=t[i],c=_(f,e);c?r[c]=i:n.push(f)}return{keyIndex:r,free:n}}function _(t,e){return!t||!e?void 0:typeof e=="string"?t[e]:e(t)}var X=ct;function at(t,e){var r=0,n={};return F(t,e,r,n),n}function F(t,e,r,n){var i=[];if(!(e===null))if(g(t)&&g(e))e!==t&&i.push({type:v.TEXT,content:e});else if(t.tag===e.tag&&t.key===e.key){var s=ut(t,e);s&&i.push({type:v.PROPS,props:s}),lt(t.children,e.children,r,n,i)}else i.push({type:v.REPLACE,node:e});i.length&&(n[r]=i)}function lt(t,e,r,n,i){var s=X(t,e,"key");if(e=s.children,s.moves.length){var f={type:v.REORDER,moves:s.moves};i.push(f)}var c=null,l=r;x(t,function(u,o){var a=e[o];l=c&&c.count?l+c.count+1:l+1,F(u,a,l,n),c=u})}function ut(t,e){var r=0,n=t.attrs,i=e.attrs,s,f,c={};for(s in n){if(s.startsWith("on-"))continue;f=n[s],i[s]!==f&&(r++,c[s]=i[s])}for(s in i){if(s.startsWith("on-"))continue;f=i[s],n.hasOwnProperty(s)||(r++,c[s]=i[s])}return r===0?null:c}var $=at;function B(t,e,r){return{tag:t,attrs:e,children:r}}function L(t){return t}function N(t){return t}function U(t,e,r){return t?e():r()}function V(t,e){return e.map(([r,n])=>g(r)?void 0:r(t,n)),t}function q(t,e){t.attrs.style=`display: ${e==="true"?"block":"none"};`}function z(t,e){t.attrs.style=`display: ${e==="true"?"none":"block"};`}var T=class{constructor({script:e,css:r,tpl:n,render:i}){this.render=i,this._ctx=this.initContext(e),this.vNode=this.render(this._ctx),this._ctx.created&&this._ctx.created()}initContext(e){return e.setData=r=>{let n=this._ctx;this.data=Object.assign(n.data,r);let i=this.render(this);console.log("new node: ",i),console.log("old node: ",this.vNode);var s=$(this.vNode,i);console.log(s),v(this.root,s),this.vNode=i,this._ctx.updated&&this._ctx.updated()},e}mount(e){this.root=e,P(this.vNode,this.root),this._ctx.mounted&&this._ctx.mounted()}destroy(){this.root.innerHTML="",this._ctx.destroyed&&this._ctx.destroyed()}};function pt(t){return new T(t)}
