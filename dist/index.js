var I=Object.defineProperty,Z=t=>I(t,"__esModule",{value:!0}),$=(t,r)=>{Z(t);for(var e in r)I(t,e,{get:r[e],enumerable:!0})};$(exports,{Cue:()=>z,_creatElement:()=>B,_createText:()=>U,_if:()=>q,_string:()=>V});function E(t,r,e){if(r==="className"&&(r="class"),/on\w+/.test(r))r=r.toLowerCase(),t[r]=e||"";else if(r==="style"){if(!e||typeof e=="string")t.style.cssText=e||"";else if(e&&typeof e=="object")for(let n in e)t.style[n]=typeof e[n]=="number"?e[n]+"px":e[n]}else r in t&&(t[r]=e||""),e?t.setAttribute(r,e):t.removeAttribute(r)}function tt(t){return Object.prototype.toString.call(t).replace(/\[object\s|\]/g,"")}function R(t){return tt(t)==="String"}function x(t,r){for(var e=0,n=t.length;e<n;e++)r(t[e],e)}function P(t){if(!t)return[];for(var r=[],e=0,n=t.length;e<n;e++)r.push(t[e]);return r}function S(t,r){return r.appendChild(et(t))}function et(t){if(typeof t=="string")return document.createTextNode(t);let r=document.createElement(t.tag);return t.attrs&&Object.keys(t.attrs).forEach(e=>{let n=t.attrs[e];e.indexOf("on-")!==-1?r.addEventListener(e.slice(3),n,!1):E(r,e,n)}),t.children&&t.children.forEach(e=>S(e,r)),r}var j=S,D=0,k=1,w=2,K=3;function g(t,r){var e={index:0};X(t,e,r)}function X(t,r,e){for(var n=e[r.index],i=t.childNodes?t.childNodes.length:0,s=0;s<i;s++){var o=t.childNodes[s];r.index++,X(o,r,e)}n&&rt(t,n)}function rt(t,r){x(r,function(e){switch(e.type){case D:var n=typeof e.node=="string"?document.createTextNode(e.node):e.node.render();t.parentNode.replaceChild(n,t);break;case k:it(t,e.moves);break;case w:nt(t,e.props);break;case K:t.textContent?t.textContent=e.content:t.nodeValue=e.content;break;default:throw new Error("Unknown patch type "+e.type)}})}function it(t,r){var e=P(t.childNodes),n={};x(e,function(i){if(i.nodeType===1){var s=i.getAttribute("key");s&&(n[s]=i)}}),x(r,function(i){var s=i.index;if(i.type===0)e[s]===t.childNodes[s]&&t.removeChild(t.childNodes[s]),e.splice(s,1);else if(i.type===1){var o=n[i.item.key]?n[i.item.key].cloneNode(!0):typeof i.item=="object"?i.item.render():document.createTextNode(i.item);e.splice(s,0,o),t.insertBefore(o,t.childNodes[s]||null)}})}function nt(t,r){for(var e in r){var n=r[e];E(t,e,n)}}g.REPLACE=D;g.REORDER=k;g.PROPS=w;g.TEXT=K;var v=g;function st(t,r,e){for(var n=F(t,e),i=F(r,e),s=i.free,o=n.keyIndex,c=i.keyIndex,l=[],u=[],f=0,a,p,G=0;f<t.length;){if(a=t[f],p=m(a,e),p)if(!c.hasOwnProperty(p))u.push(null);else{var H=c[p];u.push(r[H])}else{var J=s[G++];u.push(J||null)}f++}var h=u.slice(0);for(f=0;f<h.length;)h[f]===null?(_(f),C(f)):f++;for(var d=f=0;f<r.length;){a=r[f],p=m(a,e);var O=h[d],L=m(O,e);if(O)if(p===L)d++;else if(!o.hasOwnProperty(p))b(f,a);else{var Q=m(h[d+1],e);Q===p?(_(f),C(d),d++):b(f,a)}else b(f,a);f++}for(var T=h.length-d;d++<h.length;)T--,_(T+f);function _(y){var A={index:y,type:0};l.push(A)}function b(y,A){var Y={index:y,item:A,type:1};l.push(Y)}function C(y){h.splice(y,1)}return{moves:l,children:u}}function F(t,r){for(var e={},n=[],i=0,s=t.length;i<s;i++){var o=t[i],c=m(o,r);c?e[c]=i:n.push(o)}return{keyIndex:e,free:n}}function m(t,r){return!t||!r?void 0:typeof r=="string"?t[r]:r(t)}var M=st;function ft(t,r){var e=0,n={};return N(t,r,e,n),n}function N(t,r,e,n){var i=[];if(!(r===null))if(R(t)&&R(r))r!==t&&i.push({type:v.TEXT,content:r});else if(t.tag===r.tag&&t.key===r.key){var s=ct(t,r);s&&i.push({type:v.PROPS,props:s}),ot(t.children,r.children,e,n,i)}else i.push({type:v.REPLACE,node:r});i.length&&(n[e]=i)}function ot(t,r,e,n,i){var s=M(t,r,"key");if(r=s.children,s.moves.length){var o={type:v.REORDER,moves:s.moves};i.push(o)}var c=null,l=e;x(t,function(u,f){var a=r[f];l=c&&c.count?l+c.count+1:l+1,N(u,a,l,n),c=u})}function ct(t,r){var e=0,n=t.attrs,i=r.attrs,s,o,c={};for(s in n)o=n[s],i[s]!==o&&(e++,c[s]=i[s]);for(s in i)o=i[s],n.hasOwnProperty(s)||(e++,c[s]=i[s]);return e===0?null:c}var W=ft;function B(t,r,e){return{tag:t,attrs:r,children:e}}function U(t){return t}function V(t){return t}function q(t,r,e){return t?r():e()}var z=class{constructor({script:r,css:e,tpl:n,render:i}){this.render=i,this._ctx=this.initContext(r),this.vNode=this.render(this._ctx),this._ctx.created&&this._ctx.created()}initContext(r){return r.setData=e=>{let n=this._ctx;this.data=Object.assign(n.data,e);let i=this.render(this);console.log("new node: ",i),console.log("old node: ",this.vNode);var s=W(this.vNode,i);v(this.root,s),this.vNode=i,this._ctx.updated&&this._ctx.updated()},r}mount(r){this.root=r,j(this.vNode,this.root),this._ctx.mounted&&this._ctx.mounted()}};
